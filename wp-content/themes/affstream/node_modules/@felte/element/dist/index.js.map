{"version":3,"file":"index.js","sources":["../src/prepare.ts"],"sourcesContent":["import type { FormConfig, Obj } from '@felte/core';\nexport { FelteSubmitError } from '@felte/core';\nexport type {\n  FelteSubmitEvent,\n  FelteErrorEvent,\n  FelteSuccessEvent,\n} from '@felte/core';\n\nexport function prepareForm<Data extends Obj = any>(\n  id: string,\n  config: FormConfig<Data>\n): Promise<HTMLFelteFormElement> {\n  function handleConnect(e: Event) {\n    const felteForm = e.composedPath()[0] as HTMLFelteFormElement;\n    if (felteForm.id !== id) return;\n    felteForm.configuration = config;\n    document.removeEventListener('felteconnect', handleConnect);\n  }\n\n  document.addEventListener('felteconnect', handleConnect);\n\n  return new Promise((resolve) => {\n    function handleReady(e: Event) {\n      const felteForm = e.composedPath()[0] as HTMLFelteFormElement;\n      if (felteForm.id !== id) return;\n      resolve(felteForm);\n      document.removeEventListener('felteready', handleReady);\n    }\n    document.addEventListener('felteready', handleReady);\n  });\n}\n"],"names":[],"mappings":";;;;AAQgB,SAAA,WAAW,CACzB,EAAU,EACV,MAAwB,EAAA;IAExB,SAAS,aAAa,CAAC,CAAQ,EAAA;QAC7B,MAAM,SAAS,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC,CAAC,CAAyB,CAAC;AAC9D,QAAA,IAAI,SAAS,CAAC,EAAE,KAAK,EAAE;YAAE,OAAO;AAChC,QAAA,SAAS,CAAC,aAAa,GAAG,MAAM,CAAC;AACjC,QAAA,QAAQ,CAAC,mBAAmB,CAAC,cAAc,EAAE,aAAa,CAAC,CAAC;KAC7D;AAED,IAAA,QAAQ,CAAC,gBAAgB,CAAC,cAAc,EAAE,aAAa,CAAC,CAAC;AAEzD,IAAA,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,KAAI;QAC7B,SAAS,WAAW,CAAC,CAAQ,EAAA;YAC3B,MAAM,SAAS,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC,CAAC,CAAyB,CAAC;AAC9D,YAAA,IAAI,SAAS,CAAC,EAAE,KAAK,EAAE;gBAAE,OAAO;YAChC,OAAO,CAAC,SAAS,CAAC,CAAC;AACnB,YAAA,QAAQ,CAAC,mBAAmB,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;SACzD;AACD,QAAA,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;AACvD,KAAC,CAAC,CAAC;AACL;;;;"}