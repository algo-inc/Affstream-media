{"version":3,"file":"index.js","sources":["../../src/prepare.ts"],"sourcesContent":["import type { FormConfig, Obj } from '@felte/core';\nexport { FelteSubmitError } from '@felte/core';\nexport type {\n  FelteSubmitEvent,\n  FelteErrorEvent,\n  FelteSuccessEvent,\n} from '@felte/core';\n\nexport function prepareForm<Data extends Obj = any>(\n  id: string,\n  config: FormConfig<Data>\n): Promise<HTMLFelteFormElement> {\n  function handleConnect(e: Event) {\n    const felteForm = e.composedPath()[0] as HTMLFelteFormElement;\n    if (felteForm.id !== id) return;\n    felteForm.configuration = config;\n    document.removeEventListener('felteconnect', handleConnect);\n  }\n\n  document.addEventListener('felteconnect', handleConnect);\n\n  return new Promise((resolve) => {\n    function handleReady(e: Event) {\n      const felteForm = e.composedPath()[0] as HTMLFelteFormElement;\n      if (felteForm.id !== id) return;\n      resolve(felteForm);\n      document.removeEventListener('felteready', handleReady);\n    }\n    document.addEventListener('felteready', handleReady);\n  });\n}\n"],"names":["prepareForm","id","config","document","addEventListener","handleConnect","e","felteForm","composedPath","configuration","removeEventListener","Promise","resolve","handleReady"],"mappings":"oJAQgB,SAAAA,EACdC,EACAC,GAWA,OAFAC,SAASC,iBAAiB,gBAP1B,SAASC,EAAcC,GACrB,MAAMC,EAAYD,EAAEE,eAAe,GAC/BD,EAAUN,KAAOA,IACrBM,EAAUE,cAAgBP,EAC1BC,SAASO,oBAAoB,eAAgBL,GAC9C,IAIM,IAAIM,SAASC,IAOlBT,SAASC,iBAAiB,cAN1B,SAASS,EAAYP,GACnB,MAAMC,EAAYD,EAAEE,eAAe,GAC/BD,EAAUN,KAAOA,IACrBW,EAAQL,GACRJ,SAASO,oBAAoB,aAAcG,GAC5C,GACmD,GAExD"}