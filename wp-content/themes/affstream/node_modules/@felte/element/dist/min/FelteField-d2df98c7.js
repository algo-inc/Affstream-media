import{createField as e}from"@felte/core";function t(e){return""===e||!!e&&"false"!==e}class n extends HTMLElement{constructor(){var e;super(...arguments),this.touchOnChange=!1,this.valueProp="value",this.inputEvent="input",this.blurEvent="focusout",this.composed=!1,this._onBlur=(e="blur",function(){throw new TypeError(`Can't call "${e}" on HTMLFelteFieldElement. The element is not ready yet.`)}),this._ready=!1,this._updateField=()=>{var e;const t=this.target?this.querySelector(this.target):this.firstElementChild;t&&t!==this._element&&(this._element=t,null===(e=this._destroy)||void 0===e||e.call(this),this._destroy=void 0,this._createField())}}static get observedAttributes(){return["name","touchonchange","valueprop","inputevent","blurevent","composed","value","target"]}static get attributeMap(){return{name:{converter:String,name:"name"},touchonchange:{converter:t,name:"touchOnChange"},valueprop:{converter:String,name:"valueProp"},inputevent:{converter:String,name:"inputEvent"},blurevent:{converter:String,name:"blurEvent"},value:{converter:String,name:"value"},composed:{converter:t,name:"composed"},target:{converter:String,name:"target"}}}attributeChangedCallback(e,t,r){if(t===r)return;const{converter:i,name:s}=n.attributeMap[e];this[s]=i(r)}set value(e){var t;null===(t=this._onInput)||void 0===t||t.call(this,e),this._value=e}get value(){return this._value}blur(){this._onBlur()}get ready(){return this._ready}_createField(){var t;const{name:n,inputEvent:r,blurEvent:i,touchOnChange:s,value:a,composed:o}=this;if(!n)throw new Error('<felte-field> must have a "name" attribute');const l=this._element;if(!l)return;l[this.valueProp]=a;const{field:u,onInput:h,onBlur:v}=e(n,{touchOnChange:s,defaultValue:a,onFormReset:()=>{this.value=a,l[this.valueProp]=a}});this._onInput=h,this._onBlur=v;const{destroy:c}=u(l),d=e=>{const t=o?e.composedPath()[0]:e.target;this.value=t[this.valueProp]},m=()=>{v()};l.addEventListener(r,d),l.addEventListener(i,m),this._destroy=()=>{null==c||c(),l.removeEventListener(r,d),l.removeEventListener(r,m)},this._ready=!0,null===(t=this.onfeltefieldready)||void 0===t||t.call(this),this.dispatchEvent(new Event("feltefieldready"))}connectedCallback(){setTimeout((()=>{this._updateField(),this._observer=new MutationObserver(this._updateField),this._observer.observe(this,{childList:!0})}))}disconnectedCallback(){var e,t;null===(e=this._destroy)||void 0===e||e.call(this),null===(t=this._observer)||void 0===t||t.disconnect()}}export{n as F};
//# sourceMappingURL=FelteField-d2df98c7.js.map
