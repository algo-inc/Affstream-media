<section class="blog">
    <div class="home-blog-title wow animate__animated  animate__fadeInLeft ">
        affstream media
    </div>
    <div class="container">
        <div class="decoration">
            <svg width="156" height="157" viewBox="0 0 156 157" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M53.198 128.292L55.4475 129.559L49.1215 140.791L47.16 139.686L46.0346 129.415L45.9724 129.38L41.8514 136.696L39.6019 135.429L45.928 124.197L47.8739 125.293L48.9851 135.608L49.0552 135.648L53.198 128.292Z" fill="#100F0F"/>
                <path d="M36.6827 119.333L38.1428 117.638L44.6224 123.222L36.195 133.002L29.7154 127.419L31.1696 125.731L35.6023 129.551L37.6347 127.192L33.4528 123.589L34.8077 122.016L38.9896 125.619L41.1154 123.152L36.6827 119.333Z" fill="#100F0F"/>
                <path d="M24.5502 116.326L33.1176 113.195L34.5965 115.26L26.1214 125.516L24.4972 123.248L30.8923 116.18L30.8508 116.122L21.8767 119.588L20.5534 117.741L26.7254 110.361L26.6839 110.303L17.9277 114.074L16.3035 111.805L28.7483 107.093L30.2272 109.158L24.5035 116.26L24.5502 116.326Z" fill="#100F0F"/>
                <path d="M23.3785 90.5383L23.8119 93.0873L11.0843 95.2515L10.7063 93.0288L17.9865 85.6741L17.9745 85.6036L9.68349 87.0133L9.25006 84.4643L21.9777 82.3001L22.3527 84.5052L15.0298 91.8762L15.0433 91.9555L23.3785 90.5383Z" fill="#100F0F"/>
                <path d="M20.0551 72.033L22.2905 72.1099L21.9965 80.6581L9.09378 80.2143L9.38781 71.6661L11.6143 71.7427L11.4131 77.5905L14.5248 77.6975L14.7146 72.1806L16.789 72.2519L16.5992 77.7689L19.854 77.8808L20.0551 72.033Z" fill="#100F0F"/>
                <path d="M15.6893 60.8971L23.5201 65.6415L22.831 68.0964L9.47738 67.8977L10.2342 65.2016L19.7847 65.773L19.804 65.7041L11.4553 60.8515L12.0719 58.655L21.7263 58.8561L21.7457 58.7872L13.2954 54.2964L14.0523 51.6002L25.5561 58.3885L24.8669 60.8435L15.7111 60.8195L15.6893 60.8971Z" fill="#100F0F"/>
                <path d="M34.1658 43.6478L32.4592 45.5871L22.7765 37.0662L24.2645 35.3753L34.552 36.4033L34.5992 36.3496L28.2917 30.799L29.9982 28.8597L39.681 37.3805L38.2047 39.0581L27.8778 38.0073L27.8247 38.0677L34.1658 43.6478Z" fill="#100F0F"/>
                <path d="M46.487 29.4641L47.8302 31.2526L40.9913 36.3893L33.2379 26.0664L40.0768 20.9297L41.4147 22.711L36.7362 26.225L38.606 28.7145L43.0199 25.3993L44.2665 27.059L39.8526 30.3742L41.8084 32.9781L46.487 29.4641Z" fill="#100F0F"/>
                <path d="M52.4415 19.0724L53.6477 28.1485L51.3023 29.1489L43.0934 18.6146L45.6693 17.5159L51.2055 25.319L51.2713 25.2909L49.8252 15.7433L51.9237 14.8482L57.8138 22.5003L57.8796 22.4722L56.0878 13.072L58.6637 11.9734L60.577 25.193L58.2315 26.1934L52.5156 19.0408L52.4415 19.0724Z" fill="#100F0F"/>
                <path d="M77.4853 22.6597L74.9027 22.5339L75.5312 9.63883L77.7831 9.74857L83.3968 18.4422L83.4683 18.4457L83.8776 10.0456L86.4602 10.1714L85.8318 23.0665L83.5977 22.9576L77.9773 14.2189L77.8969 14.2149L77.4853 22.6597Z" fill="#100F0F"/>
                <path d="M96.2489 23.3677L95.6987 25.5357L87.4083 23.4317L90.5841 10.9181L98.8745 13.022L98.3265 15.1814L92.655 13.742L91.8891 16.7599L97.2397 18.1178L96.7292 20.1297L91.3785 18.7718L90.5775 21.9284L96.2489 23.3677Z" fill="#100F0F"/>
                <path d="M108.498 20.6659L102.194 27.2767L99.9506 26.0783L103.011 13.1109L105.475 14.4271L102.868 23.6092L102.931 23.6428L109.451 16.5506L111.459 17.6229L109.19 26.9858L109.253 27.0194L115.443 19.7506L117.907 21.0668L108.824 30.8174L106.58 29.6189L108.569 20.7038L108.498 20.6659Z" fill="#100F0F"/>
                <path d="M120.959 43.2776L119.436 41.1879L129.87 33.5848L131.198 35.407L127.952 45.2333L127.994 45.2912L134.791 40.3384L136.314 42.4281L125.88 50.0312L124.563 48.2235L127.839 38.3635L127.792 38.2984L120.959 43.2776Z" fill="#100F0F"/>
                <path d="M132.171 58.3512L130.137 59.2798L126.585 51.4986L138.331 46.1386L141.882 53.9199L139.855 54.8448L137.426 49.5216L134.593 50.8143L136.885 55.8362L134.997 56.698L132.705 51.676L129.742 53.0281L132.171 58.3512Z" fill="#100F0F"/>
                <path d="M141.031 66.4135L131.909 65.6282L131.439 63.1219L143.5 57.3856L144.015 60.1381L135.2 63.8557L135.213 63.9261L144.847 64.579L145.267 66.8214L136.523 70.9172L136.536 70.9876L146.101 71.2712L146.617 74.0236L133.296 73.0327L132.827 70.5264L141.046 66.4926L141.031 66.4135Z" fill="#100F0F"/>
                <path d="M132.134 90.0751L132.806 87.5784L145.273 90.9351L144.686 93.1121L134.998 96.7483L134.979 96.8175L143.1 99.0041L142.428 101.501L129.961 98.1441L130.543 95.9843L140.277 92.3511L140.298 92.2734L132.134 90.0751Z" fill="#100F0F"/>
                <path d="M127.415 108.257L125.418 107.251L129.265 99.6118L140.796 105.419L136.948 113.058L134.959 112.056L137.591 106.83L134.81 105.429L132.327 110.36L130.473 109.426L132.956 104.496L130.047 103.031L127.415 108.257Z" fill="#100F0F"/>
                <path d="M126.684 120.194L121.582 112.592L123.241 110.656L135.268 116.462L133.445 118.589L125.025 114.046L124.978 114.101L130.505 122.019L129.02 123.751L120.349 119.501L120.303 119.555L126.074 127.189L124.252 129.315L116.679 118.311L118.338 116.375L126.632 120.255L126.684 120.194Z" fill="#100F0F"/>
                <path d="M102.67 128.158L105.049 127.123L110.213 139.001L108.139 139.903L99.2272 134.578L99.1613 134.606L102.525 142.343L100.147 143.378L94.9824 131.5L97.0402 130.605L105.978 135.968L106.052 135.936L102.67 128.158Z" fill="#100F0F"/>
                <path d="M85.5432 135.82L85.0755 133.633L93.4396 131.844L96.1392 144.469L87.7751 146.258L87.3093 144.079L93.0312 142.856L92.3801 139.811L86.9819 140.965L86.5479 138.935L91.9461 137.781L91.2651 134.596L85.5432 135.82Z" fill="#100F0F"/>
                <path d="M75.7684 142.73L78.4973 133.99L81.0458 134.071L84.0541 147.082L81.2551 146.994L79.5205 137.585L79.4489 137.583L76.7392 146.851L74.4589 146.779L72.3397 137.358L72.2682 137.356L69.934 146.636L67.135 146.548L70.9678 133.752L73.5163 133.833L75.6879 142.727L75.7684 142.73Z" fill="#100F0F"/>
                <path d="M116.148 131.979L113.782 130.935L111.225 131.339L112.261 128.974L111.864 126.417L114.23 127.453L116.787 127.056L115.743 129.422L116.148 131.979Z" fill="#00E291"/>
                <path d="M143.155 81.3445L140.812 82.4465L139.438 84.6359L138.336 82.2922L136.146 80.9184L138.483 79.8163L139.864 77.627L140.966 79.9706L143.155 81.3445Z" fill="#00E291"/>
                <path d="M59.1793 140.605L58.7899 138.041L57.0854 136.102L59.6422 135.712L61.5818 134.008L61.9711 136.565L63.683 138.504L61.1262 138.894L59.1793 140.605Z" fill="#00E291"/>
                <path d="M16.647 103.341L18.2706 101.328L18.5498 98.7568L20.5629 100.38L23.1343 100.66L21.5106 102.673L21.2314 105.244L19.2184 103.62L16.647 103.341Z" fill="#00E291"/>
                <path d="M19.5498 46.2036L22.1359 46.2698L24.3473 44.9326L24.2812 47.5187L25.611 49.7375L23.0249 49.664L20.8135 51.0012L20.8869 48.4151L19.5498 46.2036Z" fill="#00E291"/>
                <path d="M116.154 34.9056L116.779 32.393L115.949 29.9465L118.461 30.5636L120.908 29.7334L120.283 32.246L121.114 34.6926L118.608 34.0754L116.154 34.9056Z" fill="#00E291"/>
                <path d="M67.7684 20.9683L66.2623 18.8597L63.8599 17.9046L65.9611 16.3985L66.9235 13.9961L68.4296 16.0973L70.8321 17.0598L68.7235 18.5659L67.7684 20.9683Z" fill="#00E291"/>
                <path d="M77.8232 39.3789L84.1765 54.6318L97.3049 44.599L95.1805 60.985L111.567 58.8606L101.534 71.9891L116.787 78.3423L101.534 84.6955L111.567 97.824L95.1805 95.6996L97.3049 112.086L84.1765 102.053L77.8232 117.306L71.47 102.053L58.3416 112.086L60.4659 95.6996L44.08 97.824L54.1127 84.6955L38.8599 78.3423L54.1127 71.9891L44.08 58.8606L60.4659 60.985L58.3416 44.599L71.47 54.6318L77.8232 39.3789Z" fill="#00E291"/>
            </svg>
        </div>
        <div class="top-blog">
            <div class="swiper blog-slider-top">
                <div class="swiper-wrapper">
					<?php
					$post_types   = array( 'reviews', 'university', 'interviews', 'news' );
					$args         = array(
						'post_type'      => $post_types,
						'posts_per_page' => 4,
						'orderby'        => 'date',
						'order'          => 'DESC',
					);
					$latest_posts = new WP_Query( $args );
					if ( $latest_posts->have_posts() ) :
						while ( $latest_posts->have_posts() ) :
							$latest_posts->the_post();
							?>
                            <div class="swiper-slide">
                                <div class="blog-post">
									<?php
									$post_type        = get_post_type();
									$post_id          = get_the_ID();
									$taxonomy_name    = getTaxonomyNameByPostType( $post_type );
									$categories       = get_the_terms( $post_id, $taxonomy_name );
									$post_type_object = get_post_type_object( $post_type );
									?>
                                    <img class="swiper-lazy" data-src="<?php the_post_thumbnail_url( $post_id, 'thumbnail' ); ?>" loading="lazy" alt="<?php the_title( $post_id ); ?>">
                                    <div class="swiper-lazy-preloader"></div>
                                    <div class="info-container">
                                        <div class="category">
											<?php
											if ( $post_type_object ) {
												$post_type_name = $post_type_object->labels->singular_name; ?>
                                                <div class="item post-type-name"><?= $post_type_name ?></div>
												<?php

											} else {
												echo 'Тип запису не знайдено.';
											}
											if ( ! empty( $categories ) ) {
												$category_names = array();
												foreach ( $categories as $category ) {
													if ( $category->name ):
														?>
                                                        <div class="item category-name"><?= $category->name ?></div>
													<?php
													endif;
													?>
													<?php
												}
											}
											?>
                                        </div>
                                        <?php
                                        $post_title = get_the_title();
                                        $title = custom_trim_excerpt($post_title, 70 );

                                        ?>
                                        <h3 class="title"><?= $title ?></h3>
                                        <p>
		                                    <?php
		                                    $text = get_the_excerpt();
		                                    $except = custom_trim_excerpt ($text, 200, '...'  );
		                                    echo $except;
		                                    ?>
                                        </p>
                                        <a class="see-more" aria-label="<?= $title ?>" href="<?php the_permalink(); ?>">See more</a>
                                    </div>
                                </div>
                            </div>
						<?php
						endwhile;
						wp_reset_postdata();
					endif;
					?>
                </div>
            </div>
        </div>
        <div class="other-blogs-pages">
            <div class="swiper blog-slider">
                <div class="swiper-wrapper">
					<?php
					$latest_posts = new WP_Query( $args );
					if ( $latest_posts->have_posts() ) :
						while ( $latest_posts->have_posts() ) :
							$latest_posts->the_post();
							?>
                            <div class="swiper-slide">
                                <div class="blog-post">
									<?php the_post_thumbnail( 'thumbnail' ); ?>
                                </div>
                            </div>
						<?php
						endwhile;
						wp_reset_postdata();
					endif;
					?>
                </div>
            </div>
        </div>
    </div>

</section>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var blogSliderTop = new Swiper('.blog-slider-top', {
      spaceBetween: 10,
      allowTouchMove: false,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      loop: true,
      loopedSlides: 4,
      lazy: true,
    });

    var blogSlider = new Swiper('.blog-slider', {
      spaceBetween: 60,
      slidesPerView: 4,
      touchRatio: 0.2,
      slideToClickedSlide: true,
      loop: true,
      loopedSlides: 4,
      breakpoints: {
        0: {
          centeredSlides: true,
          slidesPerView: 2,
          spaceBetween: 20,
        },
        768:{
          slidesPerView: 4,
          spaceBetween: 40,
        }
      },
    });
    blogSlider.controller.control = blogSliderTop;
  });
</script>


